<launch>

	<param name="robot_description" command="$(find xacro)/xacro.py '$(find pi_head_tracking_tutorial)/urdf/pi_robot.urdf.xacro'" />

	<!-- Start the low-level driver manager with parameters -->
    <node ns="ax12_controller" name="ax12_manager" pkg="ax12_controller_core" type="controller_manager.py" required="true" output="screen">
        <param name="port_name" type="str" value="/dev/ttyUSB0" />
        <param name="baud_rate" type="int" value="1000000"/>
        <param name="min_motor_id" type="int" value="1"/>
        <param name="max_motor_id" type="int" value="3"/>
        <param name="update_rate" type="int" value="20"/>
    </node>

    <!-- Load joint controller configuration from YAML file to parameter server -->
    <rosparam ns="ax12_controller" file="$(find pi_robot)/params/pi_robot_ax12.yaml" command="load"/>

    <!-- Start all Pi Robot joint controllers -->
    <node ns="ax12_controller" name="ax12_controller_spawner" pkg="ax12_controller_core" type="controller_spawner.py"
          args="--port /dev/ttyUSB0
		head_pan_controller
		head_tilt_controller"
        output="screen" />
        
	<!-- Start the AX12 Joint States Publisher -->
	<node name="ax12_joint_states_publisher" pkg="pi_robot" type="ax12_joint_states.py" />
	
	<node name="robot_state_publisher" pkg="robot_state_publisher" type="state_publisher">
    	<param name="publish_frequency" value="20.0"/>
    </node>
	
</launch>
